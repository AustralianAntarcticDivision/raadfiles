#some errors


# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20161130.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20161207.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20161214.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20161221.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20161228.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170104.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170111.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170118.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170125.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170201.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170208.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170215.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170222.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170301.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170308.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170315.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170322.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170329.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170405.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170412.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170419.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170426.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170503.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170510.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170517.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170524.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170531.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170607.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170614.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170621.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170628.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170705.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170712.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170719.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170726.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170802.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170809.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170816.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170823.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170830.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170906.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170913.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170920.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20170927.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171004.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171011.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171018.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171025.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171101.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171108.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171115.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171122.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171129.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171206.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171213.nc.gz_Error.txt
# extracting: __cmems-global-reanalysis-bio-001-033-weekly-extract=so_20171220.nc.gz_Error.txt
# extracting: ___All_Errors.txt
#
#

#' SEAPODYM model files
#'
#' Global ocean low and mid trophic levels biomass hindcast
#' @references \url{http://www.cls.fr}, \url{http://www.seapodym.eu}
#' @export
seapodym_weekly_files <- function() {
  files <- dplyr::filter(get_raad_filenames(all = TRUE), stringr::str_detect(.data$file, "cmems-global-reanalysis-bio-001-033-weekly-extract"))
  files <- dplyr::filter(files, grepl(".*\\.nc$",
                                      .data$file))

  if (nrow(files) < 1) stop("No files found for seapodym, perhaps you don't access to this collection")
  files <-   dplyr::transmute(files, fullname = file.path(.data$root, .data$file), .data$root)

  ## datadir <- get_raad_datadir()
  files <- dplyr::mutate(files, date = as.POSIXct(as.Date(stringr::str_extract(basename(.data$fullname), "[0-9]{8}"),
                                                          "%Y%m%d"),tz = "GMT"))
  dplyr::arrange(dplyr::distinct(files, date, .keep_all = TRUE), date)  %>%
    dplyr::select(.data$date, .data$fullname, .data$root) %>%
    set_dt_utc()

}
